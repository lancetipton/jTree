((typeof self !== 'undefined' ? self : this)["webpackJsonp_name_"] = (typeof self !== 'undefined' ? self : this)["webpackJsonp_name_"] || []).push([["type-definitions-string-sub_types-card"],{

/***/ "./src/scripts/modules/types/definitions/string/string.js":
/*!****************************************************************!*\
  !*** ./src/scripts/modules/types/definitions/string/string.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base */ "./src/scripts/modules/types/definitions/base/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils */ "./src/scripts/utils/index.js");
/* harmony import */ var _elementr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../elementr */ "./src/scripts/modules/elementr/index.js");
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../helpers */ "./src/scripts/modules/types/helpers/index.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }






var onEdit = function onEdit(e) {
  console.log('------------------on edit------------------');
  console.log(this);
};

var onDrag = function onDrag(e) {
  console.log('------------------on drag------------------');
  console.log(this);
};

var onDelete = function onDelete(e) {
  console.log('------------------on delete------------------');
  console.log(this);
};

var StringType =
/*#__PURE__*/
function (_BaseType) {
  _inherits(StringType, _BaseType);

  function StringType(config) {
    var _this;

    _classCallCheck(this, StringType);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(StringType).call(this, config));

    _defineProperty(_assertThisInitialized(_this), "build", function (params) {// console.log('------------------params------------------');
      // console.log(params.schema);
    });

    _defineProperty(_assertThisInitialized(_this), "render", function (props) {
      var id = props.schema.id,
          schema = props.schema;
      return _elementr__WEBPACK_IMPORTED_MODULE_2__["div"].apply(void 0, [{
        className: "string-div",
        style: {
          maxWidth: '80%'
        }
      }].concat(_toConsumableArray(Object(_helpers__WEBPACK_IMPORTED_MODULE_3__["createEditBtns"])({
        id: id,
        edit: onEdit.bind(_assertThisInitialized(_this)),
        drag: onDrag.bind(_assertThisInitialized(_this)),
        "delete": onDelete.bind(_assertThisInitialized(_this))
      })), [Object(_elementr__WEBPACK_IMPORTED_MODULE_2__["span"])("Key: ".concat(props.schema.key)), Object(_elementr__WEBPACK_IMPORTED_MODULE_2__["br"])(), Object(_elementr__WEBPACK_IMPORTED_MODULE_2__["span"])("Value: ".concat(props.schema.value))]));
    });

    Object(_utils__WEBPACK_IMPORTED_MODULE_1__["typesOverride"])(_assertThisInitialized(_this), config);
    return _this;
  }

  return StringType;
}(_base__WEBPACK_IMPORTED_MODULE_0__["default"]);

_defineProperty(StringType, "priority", 1);

_defineProperty(StringType, "eval", function (value) {
  return typeof value === 'string';
});

/* harmony default export */ __webpack_exports__["default"] = (StringType);

/***/ }),

/***/ "./src/scripts/modules/types/definitions/string/sub_types/card.js":
/*!************************************************************************!*\
  !*** ./src/scripts/modules/types/definitions/string/sub_types/card.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../string */ "./src/scripts/modules/types/definitions/string/string.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



var luhn = function luhn(cardnumber) {
  var getdigits = /\d/g;
  var digits = [];

  while (match = getdigits.exec(cardnumber)) {
    digits.push(parseInt(match[0], 10));
  }

  var sum = 0;
  var alt = false;
  digits.map(function (digit) {
    if (alt) {
      digit *= 2;
      if (digit > 9) digit -= 9;
    }

    sum += digit;
    alt = !alt;
  });
  return sum % 10 == 0 ? true : false;
};

var cardValidate = {
  visa: function visa(value) {
    return value.match(/^(?:4[0-9]{12}(?:[0-9]{3})?)$/);
  },
  master: function master(value) {
    return value.match(/^(?:5[1-5][0-9]{14})$/);
  },
  jcb: function jcb(value) {
    return value.match(/^(?:(?:2131|1800|35\d{3})\d{11})$/);
  },
  discover: function discover(value) {
    return value.match(/^(?:6(?:011|5[0-9][0-9])[0-9]{12})$/);
  },
  diners: function diners(value) {
    return value.match(/^(?:3(?:0[0-5]|[68][0-9])[0-9]{11})$/);
  },
  amx: function amx(value) {
    return value.match(/^(?:3[47][0-9]{13})$/);
  }
};

var CardType =
/*#__PURE__*/
function (_StringType) {
  _inherits(CardType, _StringType);

  function CardType(settings) {
    var _this;

    _classCallCheck(this, CardType);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(CardType).call(this, settings)); // if(settings.priorities && settings.priorities.card)
    //   this.#priority = settings.priorities.card

    _priority.set(_assertThisInitialized(_this), {
      writable: true,
      value: 2
    });

    return _this;
  }

  return CardType;
}(_string__WEBPACK_IMPORTED_MODULE_0__["default"]);

var _priority = new WeakMap();

_defineProperty(CardType, "eval", function (value) {
  var validCard;
  Object.keys(cardValidate).entries(function (_ref) {
    var _ref2 = _slicedToArray(_ref, 2),
        type = _ref2[0],
        test = _ref2[1];

    if (!validCard && test(value)) validCard = type;
  });
  return validCard ? luhn(value) : false;
});

/* harmony default export */ __webpack_exports__["default"] = (CardType);

/***/ }),

/***/ "./src/scripts/modules/types/helpers/create_icon.js":
/*!**********************************************************!*\
  !*** ./src/scripts/modules/types/helpers/create_icon.js ***!
  \**********************************************************/
/*! exports provided: createIcon */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createIcon", function() { return createIcon; });
/* harmony import */ var _elementr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../elementr */ "./src/scripts/modules/elementr/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils */ "./src/scripts/utils/index.js");
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }




var iconStyles = function iconStyles() {
  var stylId = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["uuid"])();
  var classes = {
    wrapper: "wrapper-".concat(stylId),
    icon: "icon-".concat(stylId),
    text: "text-".concat(stylId)
  };
  var styles = Object(_elementr__WEBPACK_IMPORTED_MODULE_0__["style"])("\n    .icon-wrapper.".concat(classes.wrapper, " {\n      \n    }\n    .icon-wrapper.").concat(classes.wrapper, " > a.").concat(classes.icon, " {\n      \n    }\n    .icon-wrapper.").concat(classes.wrapper, " > a.").concat(classes.icon, " > .icon-text.").concat(classes.text, " {\n      \n    }\n  "));
  return {
    classes: classes,
    styles: styles
  };
};

var createIcon = function createIcon(name, text) {
  var extraProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

  var _iconStyles = iconStyles(),
      classes = _iconStyles.classes,
      styles = _iconStyles.styles;

  var props = {
    wrapper: _objectSpread({
      className: "icon-wrapper ".concat(classes.wrapper)
    }, extraProps.wrapper),
    icon: _objectSpread({
      className: "icon-".concat(name, " fa fa-").concat(name, " ").concat(classes.icon),
      href: 'javascript:void(0);',
      title: text || name
    }, extraProps.icon),
    text: _objectSpread({
      className: "icon-text ".concat(classes.text)
    }, extraProps.text)
  };
  var children = text ? [styles, Object(_elementr__WEBPACK_IMPORTED_MODULE_0__["a"])(props.icon, Object(_elementr__WEBPACK_IMPORTED_MODULE_0__["span"])(props.text, text))] : [styles, Object(_elementr__WEBPACK_IMPORTED_MODULE_0__["a"])(props.icon)];
  return Object(_elementr__WEBPACK_IMPORTED_MODULE_0__["span"])(props.wrapper, children);
};

/***/ }),

/***/ "./src/scripts/modules/types/helpers/edit_buttons.js":
/*!***********************************************************!*\
  !*** ./src/scripts/modules/types/helpers/edit_buttons.js ***!
  \***********************************************************/
/*! exports provided: createEditBtns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createEditBtns", function() { return createEditBtns; });
/* harmony import */ var _elementr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../elementr */ "./src/scripts/modules/elementr/index.js");
/* harmony import */ var _create_icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./create_icon */ "./src/scripts/modules/types/helpers/create_icon.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils */ "./src/scripts/utils/index.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }





var btnStyles = function btnStyles() {
  var stylId = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["uuid"])();
  var classes = {
    wrapper: "wrapper-".concat(stylId),
    btns: "btns-".concat(stylId)
  };
  var styles = Object(_elementr__WEBPACK_IMPORTED_MODULE_0__["style"])("\n    div.edit-btns-wrapper.".concat(classes.wrapper, " {\n      position: relative;\n    }\n    div.edit-btns-wrapper.").concat(classes.wrapper, " > div.").concat(classes.btns, " {\n      position: absolute;\n      top: 0;\n      right: 0;\n    }\n  "));
  return {
    classes: classes,
    styles: styles
  };
};

var btnTypes = {
  edit: 'pen',
  drag: 'hand-point-up',
  "delete": 'trash-alt'
};

var buildIcon = function buildIcon(action, type, id) {
  return action ? Object(_create_icon__WEBPACK_IMPORTED_MODULE_1__["createIcon"])(btnTypes[type], "".concat(type[0].toUpperCase()).concat(type.slice(1)), {
    icon: {
      id: id,
      onclick: action
    }
  }) : '';
};

var buildActions = function buildActions(id, props) {
  return Object.keys(btnTypes).reduce(function (actions, key) {
    props[key] && actions.push(buildIcon(props[key], key, id));
    return actions;
  }, []);
};

var createEditBtns = function createEditBtns() {
  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  if (!props.id) return [];
  var id = props.id;

  var _btnStyles = btnStyles(id),
      classes = _btnStyles.classes,
      styles = _btnStyles.styles;

  return [styles, Object(_elementr__WEBPACK_IMPORTED_MODULE_0__["div"])({
    className: "".concat(classes.wrapper, " edit-btns-wrapper")
  }, [Object(_elementr__WEBPACK_IMPORTED_MODULE_0__["div"])({
    className: "".concat(classes.btns, " edit-btns")
  }, _toConsumableArray(buildActions(id, props)))])];
};

/***/ }),

/***/ "./src/scripts/modules/types/helpers/index.js":
/*!****************************************************!*\
  !*** ./src/scripts/modules/types/helpers/index.js ***!
  \****************************************************/
/*! exports provided: createIcon, createEditBtns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _create_icon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./create_icon */ "./src/scripts/modules/types/helpers/create_icon.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createIcon", function() { return _create_icon__WEBPACK_IMPORTED_MODULE_0__["createIcon"]; });

/* harmony import */ var _edit_buttons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./edit_buttons */ "./src/scripts/modules/types/helpers/edit_buttons.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createEditBtns", function() { return _edit_buttons__WEBPACK_IMPORTED_MODULE_1__["createEditBtns"]; });




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvc2NyaXB0cy9tb2R1bGVzL3R5cGVzL2RlZmluaXRpb25zL3N0cmluZy9zdHJpbmcuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3NjcmlwdHMvbW9kdWxlcy90eXBlcy9kZWZpbml0aW9ucy9zdHJpbmcvc3ViX3R5cGVzL2NhcmQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3NjcmlwdHMvbW9kdWxlcy90eXBlcy9oZWxwZXJzL2NyZWF0ZV9pY29uLmpzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9zY3JpcHRzL21vZHVsZXMvdHlwZXMvaGVscGVycy9lZGl0X2J1dHRvbnMuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3NjcmlwdHMvbW9kdWxlcy90eXBlcy9oZWxwZXJzL2luZGV4LmpzIl0sIm5hbWVzIjpbIm9uRWRpdCIsImUiLCJjb25zb2xlIiwibG9nIiwib25EcmFnIiwib25EZWxldGUiLCJTdHJpbmdUeXBlIiwiY29uZmlnIiwicGFyYW1zIiwicHJvcHMiLCJpZCIsInNjaGVtYSIsImRpdiIsImNsYXNzTmFtZSIsInN0eWxlIiwibWF4V2lkdGgiLCJjcmVhdGVFZGl0QnRucyIsImVkaXQiLCJiaW5kIiwiZHJhZyIsInNwYW4iLCJrZXkiLCJiciIsInZhbHVlIiwidHlwZXNPdmVycmlkZSIsIkJhc2VUeXBlIiwibHVobiIsImNhcmRudW1iZXIiLCJnZXRkaWdpdHMiLCJkaWdpdHMiLCJtYXRjaCIsImV4ZWMiLCJwdXNoIiwicGFyc2VJbnQiLCJzdW0iLCJhbHQiLCJtYXAiLCJkaWdpdCIsImNhcmRWYWxpZGF0ZSIsInZpc2EiLCJtYXN0ZXIiLCJqY2IiLCJkaXNjb3ZlciIsImRpbmVycyIsImFteCIsIkNhcmRUeXBlIiwic2V0dGluZ3MiLCJ2YWxpZENhcmQiLCJPYmplY3QiLCJrZXlzIiwiZW50cmllcyIsInR5cGUiLCJ0ZXN0IiwiaWNvblN0eWxlcyIsInN0eWxJZCIsInV1aWQiLCJjbGFzc2VzIiwid3JhcHBlciIsImljb24iLCJ0ZXh0Iiwic3R5bGVzIiwiY3JlYXRlSWNvbiIsIm5hbWUiLCJleHRyYVByb3BzIiwiaHJlZiIsInRpdGxlIiwiY2hpbGRyZW4iLCJhIiwiYnRuU3R5bGVzIiwiYnRucyIsImJ0blR5cGVzIiwiYnVpbGRJY29uIiwiYWN0aW9uIiwidG9VcHBlckNhc2UiLCJzbGljZSIsIm9uY2xpY2siLCJidWlsZEFjdGlvbnMiLCJyZWR1Y2UiLCJhY3Rpb25zIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQSxJQUFNQSxNQUFNLEdBQUcsU0FBVEEsTUFBUyxDQUFTQyxDQUFULEVBQVc7QUFDeEJDLFNBQU8sQ0FBQ0MsR0FBUixDQUFZLDZDQUFaO0FBQ0FELFNBQU8sQ0FBQ0MsR0FBUixDQUFZLElBQVo7QUFDRCxDQUhEOztBQUtBLElBQU1DLE1BQU0sR0FBRyxTQUFUQSxNQUFTLENBQVNILENBQVQsRUFBVztBQUN4QkMsU0FBTyxDQUFDQyxHQUFSLENBQVksNkNBQVo7QUFDQUQsU0FBTyxDQUFDQyxHQUFSLENBQVksSUFBWjtBQUNELENBSEQ7O0FBS0EsSUFBTUUsUUFBUSxHQUFHLFNBQVhBLFFBQVcsQ0FBU0osQ0FBVCxFQUFXO0FBQzFCQyxTQUFPLENBQUNDLEdBQVIsQ0FBWSwrQ0FBWjtBQUNBRCxTQUFPLENBQUNDLEdBQVIsQ0FBWSxJQUFaO0FBQ0QsQ0FIRDs7SUFLTUcsVTs7Ozs7QUFLSixzQkFBWUMsTUFBWixFQUFtQjtBQUFBOztBQUFBOztBQUNqQixvRkFBTUEsTUFBTjs7QUFEaUIsNERBS1gsVUFBQ0MsTUFBRCxFQUFZLENBQ2xCO0FBQ0E7QUFDRCxLQVJrQjs7QUFBQSw2REFVVixVQUFBQyxLQUFLLEVBQUk7QUFBQSxVQUNFQyxFQURGLEdBQ21CRCxLQURuQixDQUNSRSxNQURRLENBQ0VELEVBREY7QUFBQSxVQUNRQyxNQURSLEdBQ21CRixLQURuQixDQUNRRSxNQURSO0FBR2hCLGFBQU9DLDZDQUFHLE1BQUgsVUFBSTtBQUFFQyxpQkFBUyxjQUFYO0FBQTJCQyxhQUFLLEVBQUU7QUFBRUMsa0JBQVEsRUFBRTtBQUFaO0FBQWxDLE9BQUosNEJBQ0ZDLCtEQUFjLENBQUM7QUFDaEJOLFVBQUUsRUFBRkEsRUFEZ0I7QUFFaEJPLFlBQUksRUFBRWpCLE1BQU0sQ0FBQ2tCLElBQVAsK0JBRlU7QUFHaEJDLFlBQUksRUFBRWYsTUFBTSxDQUFDYyxJQUFQLCtCQUhVO0FBSWhCLGtCQUFRYixRQUFRLENBQUNhLElBQVQ7QUFKUSxPQUFELENBRFosSUFPTEUsc0RBQUksZ0JBQVNYLEtBQUssQ0FBQ0UsTUFBTixDQUFhVSxHQUF0QixFQVBDLEVBUUxDLG9EQUFFLEVBUkcsRUFTTEYsc0RBQUksa0JBQVdYLEtBQUssQ0FBQ0UsTUFBTixDQUFhWSxLQUF4QixFQVRDLEdBQVA7QUFXRCxLQXhCa0I7O0FBRWpCQyxnRUFBYSxnQ0FBT2pCLE1BQVAsQ0FBYjtBQUZpQjtBQUdsQjs7O0VBUnNCa0IsNkM7O2dCQUFuQm5CLFUsY0FFYyxDOztnQkFGZEEsVSxVQUdVLFVBQUNpQixLQUFEO0FBQUEsU0FBWSxPQUFPQSxLQUFQLEtBQWlCLFFBQTdCO0FBQUEsQzs7QUE4QkRqQix5RUFBZixFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3REQTs7QUFFQSxJQUFNb0IsSUFBSSxHQUFHLFNBQVBBLElBQU8sQ0FBQUMsVUFBVSxFQUFJO0FBQ3pCLE1BQU1DLFNBQVMsR0FBRyxLQUFsQjtBQUNBLE1BQU1DLE1BQU0sR0FBRyxFQUFmOztBQUNBLFNBQU9DLEtBQUssR0FBR0YsU0FBUyxDQUFDRyxJQUFWLENBQWVKLFVBQWYsQ0FBZjtBQUNFRSxVQUFNLENBQUNHLElBQVAsQ0FBWUMsUUFBUSxDQUFDSCxLQUFLLENBQUMsQ0FBRCxDQUFOLEVBQVcsRUFBWCxDQUFwQjtBQURGOztBQUdBLE1BQUlJLEdBQUcsR0FBRyxDQUFWO0FBQ0EsTUFBSUMsR0FBRyxHQUFHLEtBQVY7QUFDQU4sUUFBTSxDQUFDTyxHQUFQLENBQVcsVUFBQUMsS0FBSyxFQUFJO0FBQ2xCLFFBQUlGLEdBQUosRUFBUztBQUNQRSxXQUFLLElBQUksQ0FBVDtBQUNBLFVBQUlBLEtBQUssR0FBRyxDQUFaLEVBQWVBLEtBQUssSUFBSSxDQUFUO0FBQ2hCOztBQUVESCxPQUFHLElBQUlHLEtBQVA7QUFDQUYsT0FBRyxHQUFHLENBQUNBLEdBQVA7QUFDRCxHQVJEO0FBVUEsU0FBT0QsR0FBRyxHQUFHLEVBQU4sSUFBWSxDQUFaLEdBQ0gsSUFERyxHQUVILEtBRko7QUFHRCxDQXJCRDs7QUF1QkEsSUFBTUksWUFBWSxHQUFHO0FBQ25CQyxNQUFJLEVBQUUsY0FBQWhCLEtBQUs7QUFBQSxXQUFJQSxLQUFLLENBQUNPLEtBQU4sQ0FBWSwrQkFBWixDQUFKO0FBQUEsR0FEUTtBQUVuQlUsUUFBTSxFQUFFLGdCQUFBakIsS0FBSztBQUFBLFdBQUlBLEtBQUssQ0FBQ08sS0FBTixDQUFZLHVCQUFaLENBQUo7QUFBQSxHQUZNO0FBR25CVyxLQUFHLEVBQUUsYUFBQWxCLEtBQUs7QUFBQSxXQUFJQSxLQUFLLENBQUNPLEtBQU4sQ0FBWSxtQ0FBWixDQUFKO0FBQUEsR0FIUztBQUluQlksVUFBUSxFQUFFLGtCQUFBbkIsS0FBSztBQUFBLFdBQUlBLEtBQUssQ0FBQ08sS0FBTixDQUFZLHFDQUFaLENBQUo7QUFBQSxHQUpJO0FBS25CYSxRQUFNLEVBQUUsZ0JBQUFwQixLQUFLO0FBQUEsV0FBSUEsS0FBSyxDQUFDTyxLQUFOLENBQVksc0NBQVosQ0FBSjtBQUFBLEdBTE07QUFNbkJjLEtBQUcsRUFBRSxhQUFBckIsS0FBSztBQUFBLFdBQUlBLEtBQUssQ0FBQ08sS0FBTixDQUFZLHNCQUFaLENBQUo7QUFBQTtBQU5TLENBQXJCOztJQVNNZSxROzs7OztBQUVKLG9CQUFZQyxRQUFaLEVBQXFCO0FBQUE7O0FBQUE7O0FBQ25CLGtGQUFNQSxRQUFOLEdBRG1CLENBRW5CO0FBQ0E7O0FBSG1CO0FBQUE7QUFBQSxhQU1UO0FBTlM7O0FBQUE7QUFJcEI7OztFQU5vQnhDLCtDOzs7O2dCQUFqQnVDLFEsVUFVVSxVQUFBdEIsS0FBSyxFQUFJO0FBQ3JCLE1BQUl3QixTQUFKO0FBQ0FDLFFBQU0sQ0FDSEMsSUFESCxDQUNRWCxZQURSLEVBRUdZLE9BRkgsQ0FFVyxnQkFBb0I7QUFBQTtBQUFBLFFBQWpCQyxJQUFpQjtBQUFBLFFBQVhDLElBQVc7O0FBQzNCLFFBQUcsQ0FBQ0wsU0FBRCxJQUFjSyxJQUFJLENBQUM3QixLQUFELENBQXJCLEVBQThCd0IsU0FBUyxHQUFHSSxJQUFaO0FBQy9CLEdBSkg7QUFNQSxTQUFPSixTQUFTLEdBQ1pyQixJQUFJLENBQUNILEtBQUQsQ0FEUSxHQUVaLEtBRko7QUFHRCxDOztBQUlZc0IsdUVBQWYsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzREE7QUFDQTs7QUFFQSxJQUFNUSxVQUFVLEdBQUcsU0FBYkEsVUFBYSxHQUFNO0FBQ3ZCLE1BQU1DLE1BQU0sR0FBR0MsbURBQUksRUFBbkI7QUFFQSxNQUFNQyxPQUFPLEdBQUc7QUFDZEMsV0FBTyxvQkFBYUgsTUFBYixDQURPO0FBRWRJLFFBQUksaUJBQVVKLE1BQVYsQ0FGVTtBQUdkSyxRQUFJLGlCQUFVTCxNQUFWO0FBSFUsR0FBaEI7QUFNQSxNQUFNTSxNQUFNLEdBQUc5Qyx1REFBSywrQkFDRjBDLE9BQU8sQ0FBQ0MsT0FETixrREFJRkQsT0FBTyxDQUFDQyxPQUpOLGtCQUlxQkQsT0FBTyxDQUFDRSxJQUo3QixrREFPRkYsT0FBTyxDQUFDQyxPQVBOLGtCQU9xQkQsT0FBTyxDQUFDRSxJQVA3QiwyQkFPa0RGLE9BQU8sQ0FBQ0csSUFQMUQsMkJBQXBCO0FBWUEsU0FBTztBQUFFSCxXQUFPLEVBQVBBLE9BQUY7QUFBV0ksVUFBTSxFQUFOQTtBQUFYLEdBQVA7QUFDRCxDQXRCRDs7QUF5Qk8sSUFBTUMsVUFBVSxHQUFHLFNBQWJBLFVBQWEsQ0FBQ0MsSUFBRCxFQUFPSCxJQUFQLEVBQStCO0FBQUEsTUFBbEJJLFVBQWtCLHVFQUFQLEVBQU87O0FBQUEsb0JBQzNCVixVQUFVLEVBRGlCO0FBQUEsTUFDL0NHLE9BRCtDLGVBQy9DQSxPQUQrQztBQUFBLE1BQ3RDSSxNQURzQyxlQUN0Q0EsTUFEc0M7O0FBR3ZELE1BQU1uRCxLQUFLLEdBQUc7QUFDWmdELFdBQU87QUFDTDVDLGVBQVMseUJBQWtCMkMsT0FBTyxDQUFDQyxPQUExQjtBQURKLE9BRUZNLFVBQVUsQ0FBQ04sT0FGVCxDQURLO0FBS1pDLFFBQUk7QUFDRjdDLGVBQVMsaUJBQVVpRCxJQUFWLG9CQUF3QkEsSUFBeEIsY0FBZ0NOLE9BQU8sQ0FBQ0UsSUFBeEMsQ0FEUDtBQUVGTSxVQUFJLEVBQUUscUJBRko7QUFHRkMsV0FBSyxFQUFFTixJQUFJLElBQUlHO0FBSGIsT0FJQ0MsVUFBVSxDQUFDTCxJQUpaLENBTFE7QUFXWkMsUUFBSTtBQUNGOUMsZUFBUyxzQkFBZTJDLE9BQU8sQ0FBQ0csSUFBdkI7QUFEUCxPQUVDSSxVQUFVLENBQUNKLElBRlo7QUFYUSxHQUFkO0FBaUJBLE1BQU1PLFFBQVEsR0FBR1AsSUFBSSxHQUNqQixDQUFFQyxNQUFGLEVBQVVPLG1EQUFDLENBQUMxRCxLQUFLLENBQUNpRCxJQUFQLEVBQWF0QyxzREFBSSxDQUFDWCxLQUFLLENBQUNrRCxJQUFQLEVBQWFBLElBQWIsQ0FBakIsQ0FBWCxDQURpQixHQUVqQixDQUFFQyxNQUFGLEVBQVVPLG1EQUFDLENBQUMxRCxLQUFLLENBQUNpRCxJQUFQLENBQVgsQ0FGSjtBQUdBLFNBQU90QyxzREFBSSxDQUFDWCxLQUFLLENBQUNnRCxPQUFQLEVBQWdCUyxRQUFoQixDQUFYO0FBQ0QsQ0F4Qk0sQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzVCUDtBQUNBO0FBQ0E7O0FBRUEsSUFBTUUsU0FBUyxHQUFHLFNBQVpBLFNBQVksR0FBTTtBQUN0QixNQUFNZCxNQUFNLEdBQUdDLG1EQUFJLEVBQW5CO0FBRUEsTUFBTUMsT0FBTyxHQUFHO0FBQ2RDLFdBQU8sb0JBQWFILE1BQWIsQ0FETztBQUVkZSxRQUFJLGlCQUFVZixNQUFWO0FBRlUsR0FBaEI7QUFLQSxNQUFNTSxNQUFNLEdBQUc5Qyx1REFBSyx1Q0FDTTBDLE9BQU8sQ0FBQ0MsT0FEZCw2RUFJTUQsT0FBTyxDQUFDQyxPQUpkLG9CQUkrQkQsT0FBTyxDQUFDYSxJQUp2Qyw4RUFBcEI7QUFXQSxTQUFPO0FBQUViLFdBQU8sRUFBUEEsT0FBRjtBQUFXSSxVQUFNLEVBQU5BO0FBQVgsR0FBUDtBQUNELENBcEJEOztBQXNCQSxJQUFNVSxRQUFRLEdBQUc7QUFDZnJELE1BQUksRUFBRSxLQURTO0FBRWZFLE1BQUksRUFBRSxlQUZTO0FBR2YsWUFBUTtBQUhPLENBQWpCOztBQU1BLElBQU1vRCxTQUFTLEdBQUcsU0FBWkEsU0FBWSxDQUFDQyxNQUFELEVBQVNyQixJQUFULEVBQWV6QyxFQUFmLEVBQXNCO0FBQ3RDLFNBQU84RCxNQUFNLEdBQ1RYLCtEQUFVLENBQ1JTLFFBQVEsQ0FBQ25CLElBQUQsQ0FEQSxZQUVMQSxJQUFJLENBQUMsQ0FBRCxDQUFKLENBQVFzQixXQUFSLEVBRkssU0FFbUJ0QixJQUFJLENBQUN1QixLQUFMLENBQVcsQ0FBWCxDQUZuQixHQUdSO0FBQUVoQixRQUFJLEVBQUU7QUFBRWhELFFBQUUsRUFBRkEsRUFBRjtBQUFNaUUsYUFBTyxFQUFFSDtBQUFmO0FBQVIsR0FIUSxDQURELEdBTVQsRUFOSjtBQU9ELENBUkQ7O0FBVUEsSUFBTUksWUFBWSxHQUFHLFNBQWZBLFlBQWUsQ0FBQ2xFLEVBQUQsRUFBS0QsS0FBTDtBQUFBLFNBQ25CdUMsTUFBTSxDQUNIQyxJQURILENBQ1FxQixRQURSLEVBRUdPLE1BRkgsQ0FFVSxVQUFDQyxPQUFELEVBQVV6RCxHQUFWLEVBQWtCO0FBQ3hCWixTQUFLLENBQUNZLEdBQUQsQ0FBTCxJQUFjeUQsT0FBTyxDQUFDOUMsSUFBUixDQUFhdUMsU0FBUyxDQUFFOUQsS0FBSyxDQUFDWSxHQUFELENBQVAsRUFBY0EsR0FBZCxFQUFtQlgsRUFBbkIsQ0FBdEIsQ0FBZDtBQUNBLFdBQU9vRSxPQUFQO0FBQ0QsR0FMSCxFQUtLLEVBTEwsQ0FEbUI7QUFBQSxDQUFyQjs7QUFTTyxJQUFNOUQsY0FBYyxHQUFHLFNBQWpCQSxjQUFpQixHQUFjO0FBQUEsTUFBYlAsS0FBYSx1RUFBUCxFQUFPO0FBRTFDLE1BQUcsQ0FBQ0EsS0FBSyxDQUFDQyxFQUFWLEVBQWMsT0FBTyxFQUFQO0FBRjRCLE1BSWxDQSxFQUprQyxHQUkzQkQsS0FKMkIsQ0FJbENDLEVBSmtDOztBQUFBLG1CQUtkMEQsU0FBUyxDQUFDMUQsRUFBRCxDQUxLO0FBQUEsTUFLbEM4QyxPQUxrQyxjQUtsQ0EsT0FMa0M7QUFBQSxNQUt6QkksTUFMeUIsY0FLekJBLE1BTHlCOztBQU8xQyxTQUFPLENBQ0xBLE1BREssRUFFTGhELHFEQUFHLENBQUM7QUFBRUMsYUFBUyxZQUFLMkMsT0FBTyxDQUFDQyxPQUFiO0FBQVgsR0FBRCxFQUF3RCxDQUN6RDdDLHFEQUFHLENBQUM7QUFBRUMsYUFBUyxZQUFLMkMsT0FBTyxDQUFDYSxJQUFiO0FBQVgsR0FBRCxxQkFDRU8sWUFBWSxDQUFDbEUsRUFBRCxFQUFLRCxLQUFMLENBRGQsRUFEc0QsQ0FBeEQsQ0FGRSxDQUFQO0FBUUQsQ0FmTSxDOzs7Ozs7Ozs7Ozs7QUNuRFA7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSIsImZpbGUiOiJ0eXBlLWRlZmluaXRpb25zLXN0cmluZy1zdWJfdHlwZXMtY2FyZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZVR5cGUgZnJvbSAnLi4vYmFzZSdcbmltcG9ydCB7IHR5cGVzT3ZlcnJpZGUgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscydcbmltcG9ydCB7IGRpdiwgYnIsIHNwYW4gfSBmcm9tICcuLi8uLi8uLi9lbGVtZW50cidcbmltcG9ydCB7IGNyZWF0ZUVkaXRCdG5zIH0gZnJvbSAnLi4vLi4vaGVscGVycydcblxuXG5jb25zdCBvbkVkaXQgPSBmdW5jdGlvbihlKXtcbiAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLW9uIGVkaXQtLS0tLS0tLS0tLS0tLS0tLS0nKTtcbiAgY29uc29sZS5sb2codGhpcyk7XG59XG5cbmNvbnN0IG9uRHJhZyA9IGZ1bmN0aW9uKGUpe1xuICBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tLS0tb24gZHJhZy0tLS0tLS0tLS0tLS0tLS0tLScpO1xuICBjb25zb2xlLmxvZyh0aGlzKTtcbn1cblxuY29uc3Qgb25EZWxldGUgPSBmdW5jdGlvbihlKXtcbiAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLW9uIGRlbGV0ZS0tLS0tLS0tLS0tLS0tLS0tLScpO1xuICBjb25zb2xlLmxvZyh0aGlzKTtcbn1cblxuY2xhc3MgU3RyaW5nVHlwZSBleHRlbmRzIEJhc2VUeXBlIHtcblxuICBzdGF0aWMgcHJpb3JpdHkgPSAxXG4gIHN0YXRpYyBldmFsID0gKHZhbHVlKSA9PiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJylcbiAgXG4gIGNvbnN0cnVjdG9yKGNvbmZpZyl7XG4gICAgc3VwZXIoY29uZmlnKVxuICAgIHR5cGVzT3ZlcnJpZGUodGhpcywgY29uZmlnKVxuICB9XG5cbiAgYnVpbGQgPSAocGFyYW1zKSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLXBhcmFtcy0tLS0tLS0tLS0tLS0tLS0tLScpO1xuICAgIC8vIGNvbnNvbGUubG9nKHBhcmFtcy5zY2hlbWEpO1xuICB9XG5cbiAgcmVuZGVyID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IHsgc2NoZW1hOiB7IGlkIH0sIHNjaGVtYSB9ID0gcHJvcHNcbiAgICBcbiAgICByZXR1cm4gZGl2KHsgY2xhc3NOYW1lOiBgc3RyaW5nLWRpdmAsIHN0eWxlOiB7IG1heFdpZHRoOiAnODAlJyB9IH0sXG4gICAgICAuLi5jcmVhdGVFZGl0QnRucyh7XG4gICAgICAgIGlkLFxuICAgICAgICBlZGl0OiBvbkVkaXQuYmluZCh0aGlzKSxcbiAgICAgICAgZHJhZzogb25EcmFnLmJpbmQodGhpcyksXG4gICAgICAgIGRlbGV0ZTogb25EZWxldGUuYmluZCh0aGlzKSxcbiAgICAgIH0pLFxuICAgICAgc3BhbihgS2V5OiAke3Byb3BzLnNjaGVtYS5rZXl9YCksXG4gICAgICBicigpLFxuICAgICAgc3BhbihgVmFsdWU6ICR7cHJvcHMuc2NoZW1hLnZhbHVlfWApXG4gICAgKVxuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RyaW5nVHlwZSIsImltcG9ydCBTdHJpbmdUeXBlIGZyb20gJy4uL3N0cmluZydcblxuY29uc3QgbHVobiA9IGNhcmRudW1iZXIgPT4ge1xuICBjb25zdCBnZXRkaWdpdHMgPSAvXFxkL2dcbiAgY29uc3QgZGlnaXRzID0gW11cbiAgd2hpbGUgKG1hdGNoID0gZ2V0ZGlnaXRzLmV4ZWMoY2FyZG51bWJlcikpXG4gICAgZGlnaXRzLnB1c2gocGFyc2VJbnQobWF0Y2hbMF0sIDEwKSlcblxuICBsZXQgc3VtID0gMFxuICBsZXQgYWx0ID0gZmFsc2VcbiAgZGlnaXRzLm1hcChkaWdpdCA9PiB7XG4gICAgaWYgKGFsdCkge1xuICAgICAgZGlnaXQgKj0gMlxuICAgICAgaWYgKGRpZ2l0ID4gOSkgZGlnaXQgLT0gOVxuICAgIH1cblxuICAgIHN1bSArPSBkaWdpdFxuICAgIGFsdCA9ICFhbHRcbiAgfSlcblxuICByZXR1cm4gc3VtICUgMTAgPT0gMFxuICAgID8gdHJ1ZVxuICAgIDogZmFsc2Vcbn1cblxuY29uc3QgY2FyZFZhbGlkYXRlID0ge1xuICB2aXNhOiB2YWx1ZSA9PiB2YWx1ZS5tYXRjaCgvXig/OjRbMC05XXsxMn0oPzpbMC05XXszfSk/KSQvKSxcbiAgbWFzdGVyOiB2YWx1ZSA9PiB2YWx1ZS5tYXRjaCgvXig/OjVbMS01XVswLTldezE0fSkkLyksXG4gIGpjYjogdmFsdWUgPT4gdmFsdWUubWF0Y2goL14oPzooPzoyMTMxfDE4MDB8MzVcXGR7M30pXFxkezExfSkkLyksXG4gIGRpc2NvdmVyOiB2YWx1ZSA9PiB2YWx1ZS5tYXRjaCgvXig/OjYoPzowMTF8NVswLTldWzAtOV0pWzAtOV17MTJ9KSQvKSxcbiAgZGluZXJzOiB2YWx1ZSA9PiB2YWx1ZS5tYXRjaCgvXig/OjMoPzowWzAtNV18WzY4XVswLTldKVswLTldezExfSkkLyksXG4gIGFteDogdmFsdWUgPT4gdmFsdWUubWF0Y2goL14oPzozWzQ3XVswLTldezEzfSkkLyksXG59XG5cbmNsYXNzIENhcmRUeXBlIGV4dGVuZHMgU3RyaW5nVHlwZSB7XG5cbiAgY29uc3RydWN0b3Ioc2V0dGluZ3Mpe1xuICAgIHN1cGVyKHNldHRpbmdzKVxuICAgIC8vIGlmKHNldHRpbmdzLnByaW9yaXRpZXMgJiYgc2V0dGluZ3MucHJpb3JpdGllcy5jYXJkKVxuICAgIC8vICAgdGhpcy4jcHJpb3JpdHkgPSBzZXR0aW5ncy5wcmlvcml0aWVzLmNhcmRcbiAgfVxuICBcbiAgI3ByaW9yaXR5ID0gMlxuICBcbiAgc3RhdGljIGV2YWwgPSB2YWx1ZSA9PiB7XG4gICAgbGV0IHZhbGlkQ2FyZFxuICAgIE9iamVjdFxuICAgICAgLmtleXMoY2FyZFZhbGlkYXRlKVxuICAgICAgLmVudHJpZXMoKFsgdHlwZSwgdGVzdCBdKSA9PiB7XG4gICAgICAgIGlmKCF2YWxpZENhcmQgJiYgdGVzdCh2YWx1ZSkpIHZhbGlkQ2FyZCA9IHR5cGVcbiAgICAgIH0pXG5cbiAgICByZXR1cm4gdmFsaWRDYXJkXG4gICAgICA/IGx1aG4odmFsdWUpXG4gICAgICA6IGZhbHNlXG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkVHlwZSIsImltcG9ydCB7IGRpdiwgc3BhbiwgYSwgc3R5bGUgIH0gZnJvbSAnLi4vLi4vZWxlbWVudHInXG5pbXBvcnQgeyB1dWlkIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMnXG5cbmNvbnN0IGljb25TdHlsZXMgPSAoKSA9PiB7XG4gIGNvbnN0IHN0eWxJZCA9IHV1aWQoKVxuICBcbiAgY29uc3QgY2xhc3NlcyA9IHtcbiAgICB3cmFwcGVyOiBgd3JhcHBlci0ke3N0eWxJZH1gLFxuICAgIGljb246IGBpY29uLSR7c3R5bElkfWAsXG4gICAgdGV4dDogYHRleHQtJHtzdHlsSWR9YFxuICB9XG4gIFxuICBjb25zdCBzdHlsZXMgPSBzdHlsZShgXG4gICAgLmljb24td3JhcHBlci4ke2NsYXNzZXMud3JhcHBlcn0ge1xuICAgICAgXG4gICAgfVxuICAgIC5pY29uLXdyYXBwZXIuJHtjbGFzc2VzLndyYXBwZXJ9ID4gYS4ke2NsYXNzZXMuaWNvbn0ge1xuICAgICAgXG4gICAgfVxuICAgIC5pY29uLXdyYXBwZXIuJHtjbGFzc2VzLndyYXBwZXJ9ID4gYS4ke2NsYXNzZXMuaWNvbn0gPiAuaWNvbi10ZXh0LiR7Y2xhc3Nlcy50ZXh0fSB7XG4gICAgICBcbiAgICB9XG4gIGApXG5cbiAgcmV0dXJuIHsgY2xhc3Nlcywgc3R5bGVzIH1cbn1cblxuXG5leHBvcnQgY29uc3QgY3JlYXRlSWNvbiA9IChuYW1lLCB0ZXh0LCBleHRyYVByb3BzPXt9KSA9PiB7XG4gIGNvbnN0IHsgY2xhc3Nlcywgc3R5bGVzIH0gPSBpY29uU3R5bGVzKClcbiAgXG4gIGNvbnN0IHByb3BzID0ge1xuICAgIHdyYXBwZXI6IHtcbiAgICAgIGNsYXNzTmFtZTogYGljb24td3JhcHBlciAke2NsYXNzZXMud3JhcHBlcn1gLFxuICAgICAgLi4uZXh0cmFQcm9wcy53cmFwcGVyXG4gICAgfSxcbiAgICBpY29uOiB7XG4gICAgICBjbGFzc05hbWU6IGBpY29uLSR7bmFtZX0gZmEgZmEtJHtuYW1lfSAke2NsYXNzZXMuaWNvbn1gLFxuICAgICAgaHJlZjogJ2phdmFzY3JpcHQ6dm9pZCgwKTsnLFxuICAgICAgdGl0bGU6IHRleHQgfHwgbmFtZSxcbiAgICAgIC4uLmV4dHJhUHJvcHMuaWNvblxuICAgIH0sXG4gICAgdGV4dDoge1xuICAgICAgY2xhc3NOYW1lOiBgaWNvbi10ZXh0ICR7Y2xhc3Nlcy50ZXh0fWAsXG4gICAgICAuLi5leHRyYVByb3BzLnRleHRcbiAgICB9XG4gIH1cblxuICBjb25zdCBjaGlsZHJlbiA9IHRleHRcbiAgICA/IFsgc3R5bGVzLCBhKHByb3BzLmljb24sIHNwYW4ocHJvcHMudGV4dCwgdGV4dCkpIF1cbiAgICA6IFsgc3R5bGVzLCBhKHByb3BzLmljb24pIF1cbiAgcmV0dXJuIHNwYW4ocHJvcHMud3JhcHBlciwgY2hpbGRyZW4gKVxufSIsImltcG9ydCB7IGRpdiwgc3R5bGUgIH0gZnJvbSAnLi4vLi4vZWxlbWVudHInXG5pbXBvcnQgeyBjcmVhdGVJY29uIH0gZnJvbSAnLi9jcmVhdGVfaWNvbidcbmltcG9ydCB7IHV1aWQgfSBmcm9tICcuLi8uLi8uLi91dGlscydcblxuY29uc3QgYnRuU3R5bGVzID0gKCkgPT4ge1xuICBjb25zdCBzdHlsSWQgPSB1dWlkKClcbiAgXG4gIGNvbnN0IGNsYXNzZXMgPSB7XG4gICAgd3JhcHBlcjogYHdyYXBwZXItJHtzdHlsSWR9YCxcbiAgICBidG5zOiBgYnRucy0ke3N0eWxJZH1gLFxuICB9XG4gIFxuICBjb25zdCBzdHlsZXMgPSBzdHlsZShgXG4gICAgZGl2LmVkaXQtYnRucy13cmFwcGVyLiR7Y2xhc3Nlcy53cmFwcGVyfSB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgfVxuICAgIGRpdi5lZGl0LWJ0bnMtd3JhcHBlci4ke2NsYXNzZXMud3JhcHBlcn0gPiBkaXYuJHtjbGFzc2VzLmJ0bnN9IHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMDtcbiAgICAgIHJpZ2h0OiAwO1xuICAgIH1cbiAgYClcblxuICByZXR1cm4geyBjbGFzc2VzLCBzdHlsZXMgfVxufVxuXG5jb25zdCBidG5UeXBlcyA9IHtcbiAgZWRpdDogJ3BlbicsXG4gIGRyYWc6ICdoYW5kLXBvaW50LXVwJyxcbiAgZGVsZXRlOiAndHJhc2gtYWx0Jyxcbn1cblxuY29uc3QgYnVpbGRJY29uID0gKGFjdGlvbiwgdHlwZSwgaWQpID0+IHtcbiAgcmV0dXJuIGFjdGlvblxuICAgID8gY3JlYXRlSWNvbihcbiAgICAgICAgYnRuVHlwZXNbdHlwZV0sXG4gICAgICAgIGAke3R5cGVbMF0udG9VcHBlckNhc2UoKX0ke3R5cGUuc2xpY2UoMSl9YCxcbiAgICAgICAgeyBpY29uOiB7IGlkLCBvbmNsaWNrOiBhY3Rpb24gfSB9XG4gICAgICApXG4gICAgOiAnJ1xufVxuXG5jb25zdCBidWlsZEFjdGlvbnMgPSAoaWQsIHByb3BzKSA9PiAoXG4gIE9iamVjdFxuICAgIC5rZXlzKGJ0blR5cGVzKVxuICAgIC5yZWR1Y2UoKGFjdGlvbnMsIGtleSkgPT4ge1xuICAgICAgcHJvcHNba2V5XSAmJiBhY3Rpb25zLnB1c2goYnVpbGRJY29uKCBwcm9wc1trZXldLCBrZXksIGlkICkpXG4gICAgICByZXR1cm4gYWN0aW9uc1xuICAgIH0sIFtdKVxuKVxuXG5leHBvcnQgY29uc3QgY3JlYXRlRWRpdEJ0bnMgPSAocHJvcHM9e30pID0+IHtcbiAgXG4gIGlmKCFwcm9wcy5pZCkgcmV0dXJuIFtdXG5cbiAgY29uc3QgeyBpZCB9ID0gcHJvcHNcbiAgY29uc3QgeyBjbGFzc2VzLCBzdHlsZXMgfSA9IGJ0blN0eWxlcyhpZClcblxuICByZXR1cm4gW1xuICAgIHN0eWxlcyxcbiAgICBkaXYoeyBjbGFzc05hbWU6IGAke2NsYXNzZXMud3JhcHBlcn0gZWRpdC1idG5zLXdyYXBwZXJgIH0sIFtcbiAgICAgIGRpdih7IGNsYXNzTmFtZTogYCR7Y2xhc3Nlcy5idG5zfSBlZGl0LWJ0bnNgIH0sIFtcbiAgICAgICAgLi4uYnVpbGRBY3Rpb25zKGlkLCBwcm9wcylcbiAgICAgIF0pXG4gICAgXSlcbiAgXVxufVxuIiwiZXhwb3J0ICogZnJvbSAnLi9jcmVhdGVfaWNvbidcbmV4cG9ydCAqIGZyb20gJy4vZWRpdF9idXR0b25zJyJdLCJzb3VyY2VSb290IjoiIn0=